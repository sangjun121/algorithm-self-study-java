# 차분 배열 트릭 (Difference Array)

## 1. 개념
- 차분 배열 기법이란? **특정 구간[s,e]에 대해 한번의 연산으로 전체 범위 값을 조작하는 방법**을 의미한다.
- arr[i]에 직접 값을 더하는 대신, **차분 배열(diff array)** 을 사용해서 값의 변화만 기록하는 방식
- 이에 대해 마지막에 누적 합을 계산하면 arr이 완성된다.
- 배열에서 구간에 대해 값을 업데이트 해주어야 할때, O(1)시간안에 해결할 수 있는 알고리즘.

## 2. 방법
- 가정    
  - diff[]는 차분 배열, arr[]은 원래 구하고자 하는 배열이다.
  - diff[i]는 원소 arr[i]가 이전 원소인 arr[i-1]보다 얼마나 변화 했는지를 표현하는 것이다.
  - 예를 들어, arr[size = 10]라고 할 때, arr[1~5]까지의 + 10, arr[0~4]까지 -5를 해준다고 가정하자.

1. diff[] 업데이트 하기
```java
diff[s] += K; // 시작점을 +K 처리. 이는, s-1보다 s가 K 크다는 것을 의미하는 것이다.
diff[e + 1] -= K; // 끝점의 다음 인덱스를 -K처리. 이는 즉, e+1은 e보다 -K작다는 것을 의미한다.
```

2. diff[]의 누적합 구하기
- diff[0] = arr[0]으로 시작으로 누적합을 구한다.
- 누적합으로 구한 배열을 prefixSum[]이라고 할 때, arr[i] 는 "기존 arr[i] + diff[i]"가 된다.

## 3. 예시
- 대표적인 예시 문제: **BOJ19951 태상이의 훈련소 생활**

## 4. 시간 복잡도
- 결과적으로, 기본 for문으로 처리시에, 쿼리수 M, arr[]의 사이즈를 N으로 가정했을 때 O(N*M)만큼의 시간이 걸린다.
- 차분 배열 트릭을 사용하는 경우, O(N+M)의 시간이 걸리기에 시간을 낮출 수 있다.
